{"ast":null,"code":"import _asyncToGenerator from \"/Users/f_orozco/Documents/INE/angular-ldap-login/angular-ldap-login/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AuthService } from '../auth/auth.service';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nfunction LoginComponent_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error());\n  }\n}\nexport class LoginComponent {\n  constructor() {\n    this.auth = inject(AuthService);\n    this.router = inject(Router);\n    this.username = 'claudia.olguin';\n    this.password = 'pasword';\n    this.loading = signal(false);\n    this.error = signal(null);\n  }\n  onSubmit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.error.set(null);\n      _this.loading.set(true);\n      try {\n        const resp = yield _this.auth.login(_this.username, _this.password).toPromise();\n        if (resp?.ok && resp.token) {\n          _this.auth.token = resp.token;\n          _this.router.navigateByUrl('/');\n        } else {\n          _this.error.set(resp?.error || 'Error de autenticación');\n        }\n      } catch (e) {\n        _this.error.set(e?.error?.error || 'No se pudo contactar al servidor');\n      } finally {\n        _this.loading.set(false);\n      }\n    })();\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 13,\n      vars: 4,\n      consts: [[1, \"card\"], [3, \"ngSubmit\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"submit\", 3, \"disabled\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"error\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Login LDAP\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 1);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(4, \"label\");\n          i0.ɵɵtext(5, \"Usuario\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"input\", 2);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_6_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.username, $event) || (ctx.username = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"label\");\n          i0.ɵɵtext(8, \"Contrase\\u00F1a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"input\", 3);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_9_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.password, $event) || (ctx.password = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"button\", 4);\n          i0.ɵɵtext(11, \"Entrar\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(12, LoginComponent_p_12_Template, 2, 1, \"p\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(6);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.username);\n          i0.ɵɵadvance(3);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.password);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.loading());\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.error());\n        }\n      },\n      dependencies: [CommonModule, i1.NgIf, FormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.NgForm],\n      styles: [\".card[_ngcontent-%COMP%]{max-width:360px;margin:40px auto;padding:24px;border:1px solid #ddd;border-radius:12px}\\nlabel[_ngcontent-%COMP%]{display:block;margin-top:12px}\\ninput[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:6px}\\nbutton[_ngcontent-%COMP%]{margin-top:16px;width:100%;padding:10px}\\n.error[_ngcontent-%COMP%]{color:#b00020;margin-top:12px}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMscUJBQXFCLENBQUMsa0JBQWtCO0FBQzVGLE1BQU0sYUFBYSxDQUFDLGVBQWU7QUFDbkMsTUFBTSxVQUFVLENBQUMsV0FBVyxDQUFDLGNBQWM7QUFDM0MsT0FBTyxlQUFlLENBQUMsVUFBVSxDQUFDLFlBQVk7QUFDOUMsT0FBTyxhQUFhLENBQUMsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJke21heC13aWR0aDozNjBweDttYXJnaW46NDBweCBhdXRvO3BhZGRpbmc6MjRweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czoxMnB4fVxubGFiZWx7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjEycHh9XG5pbnB1dHt3aWR0aDoxMDAlO3BhZGRpbmc6OHB4O21hcmdpbi10b3A6NnB4fVxuYnV0dG9ue21hcmdpbi10b3A6MTZweDt3aWR0aDoxMDAlO3BhZGRpbmc6MTBweH1cbi5lcnJvcntjb2xvcjojYjAwMDIwO21hcmdpbi10b3A6MTJweH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["inject","signal","CommonModule","FormsModule","AuthService","Router","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","error","LoginComponent","constructor","auth","router","username","password","loading","onSubmit","_this","_asyncToGenerator","set","resp","login","toPromise","ok","token","navigateByUrl","e","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_3_listener","ɵɵtwoWayListener","LoginComponent_Template_input_ngModelChange_6_listener","$event","ɵɵtwoWayBindingSet","LoginComponent_Template_input_ngModelChange_9_listener","ɵɵtemplate","LoginComponent_p_12_Template","ɵɵtwoWayProperty","ɵɵproperty","i1","NgIf","i2","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","NgModel","NgForm","styles"],"sources":["/Users/f_orozco/Documents/INE/angular-ldap-login/angular-ldap-login/src/app/login/login.component.ts","/Users/f_orozco/Documents/INE/angular-ldap-login/angular-ldap-login/src/app/login/login.component.html"],"sourcesContent":["import { Component, inject, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AuthService } from '../auth/auth.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  standalone: true,\n  selector: 'app-login',\n  imports: [CommonModule, FormsModule],\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  private auth = inject(AuthService);\n  private router = inject(Router);\n\n  username = 'claudia.olguin';\n  password = 'pasword';\n  loading = signal(false);\n  error = signal<string | null>(null);\n\n  async onSubmit() {\n    this.error.set(null);\n    this.loading.set(true);\n    try {\n      const resp = await this.auth.login(this.username, this.password).toPromise();\n      if (resp?.ok && resp.token) {\n        this.auth.token = resp.token;\n        this.router.navigateByUrl('/');\n      } else {\n        this.error.set(resp?.error || 'Error de autenticación');\n      }\n    } catch (e: any) {\n      this.error.set(e?.error?.error || 'No se pudo contactar al servidor');\n    } finally {\n      this.loading.set(false);\n    }\n  }\n}","<div class=\"card\">\n  <h2>Login LDAP</h2>\n  <form (ngSubmit)=\"onSubmit()\">\n    <label>Usuario</label>\n    <input type=\"text\" [(ngModel)]=\"username\" name=\"username\" required />\n    <label>Contraseña</label>\n    <input type=\"password\" [(ngModel)]=\"password\" name=\"password\" required />\n    <button type=\"submit\" [disabled]=\"loading()\">Entrar</button>\n  </form>\n  <p class=\"error\" *ngIf=\"error()\">{{ error() }}</p>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}